# ЁЯдЦ Ultimate WhatsApp AI Bot (Production v90)

This is a complete guide to set up your **FREE & Immortal** WhatsApp Bot on GitHub Actions.

---

## тЪб рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдпрд╣ рдкреЗрдЬ рдЦреЛрд▓реЗрдВ
1.  рдЕрдкрдиреЗ **GitHub Repository** рдореЗрдВ рдЬрд╛рдПрдВред
2.  рдКрдкрд░ **Settings** рдЯреИрдм рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
3.  рд▓реЗрдлреНрдЯ рд╕рд╛рдЗрдб рдореЗрдВ **Secrets and variables** -> **Actions** рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
4.  рдЗрд╕ рдкреЗрдЬ рдХреЛ рдЦреБрд▓рд╛ рд░рдЦреЗрдВред рд╣рдо рдЬреЛ рднреА рдХреЙрдкреА рдХрд░реЗрдВрдЧреЗ, рдпрд╣реАрдВ **"New repository secret"** рдмрдЯрди рджрдмрд╛рдХрд░ рд╕реЗрд╡ рдХрд░реЗрдВрдЧреЗред

---

## ЁЯЫая╕П Step 1: Ngrok (Server Tunnel)
1.  [dashboard.ngrok.com](https://dashboard.ngrok.com) рдкрд░ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВред
2.  рд▓реЗрдлреНрдЯ рдореЗрдиреВ рдореЗрдВ **"Setup & Installation"** рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
3.  **Token:** рдкреЗрдЬ рдкрд░ рд╕рдмрд╕реЗ рдКрдкрд░ **"Your Authtoken"** рджрд┐рдЦреЗрдЧрд╛, рдЙрд╕реЗ рдХреЙрдкреА рдХрд░реЗрдВред
    * ЁЯСЙ **GitHub Secret Name:** `NGROK_TOKEN`
    * ЁЯСЙ **Value:** (Token рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)
4.  **Domain:** рдЙрд╕реА рдкреЗрдЬ рдкрд░ рдиреАрдЪреЗ рд╕реНрдХреНрд░реЙрд▓ рдХрд░реЗрдВред **"Deploy your app online"** рд╕реЗрдХреНрд╢рди рдореЗрдВ рдПрдХ рдиреАрд▓реЗ рд░рдВрдЧ рдХрд╛ рд▓рд┐рдВрдХ рджрд┐рдЦреЗрдЧрд╛ (рдЬреИрд╕реЗ `fun-bot.ngrok-free.dev`)ред рдЙрд╕реЗ рдХреЙрдкреА рдХрд░реЗрдВ (**рдмрд┐рдирд╛** `https://` рдХреЗ)ред
    * ЁЯСЙ **GitHub Secret Name:** `NGROK_DOMAIN`
    * ЁЯСЙ **Value:** (Domain рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)

---

## ЁЯЫая╕П Step 2: MongoDB Atlas (Database)
**рдЖрдкрдХреЛ рдирдпрд╛ рдХреБрдЫ рдирд╣реАрдВ рдмрдирд╛рдирд╛, рдмрд╕ рдпрд╣ рд▓рд┐рдВрдХ рдХреЙрдкреА рдХрд░реЗрдВ рдФрд░ рдПрдбрд┐рдЯ рдХрд░реЗрдВ:**

1.  [cloud.mongodb.com](https://cloud.mongodb.com) рдкрд░ рд▓реЙрдЧрд┐рди рдХрд░рдХреЗ **Connect** рдмрдЯрди рджрдмрд╛рдПрдВ рдФрд░ рд▓рд┐рдВрдХ рдХреЙрдкреА рдХрд░реЗрдВред
2.  рд▓рд┐рдВрдХ рдРрд╕рд╛ рджрд┐рдЦреЗрдЧрд╛: `mongodb+srv://user:<password>@cluster0.abc.mongodb.net/?appName=Cluster0`
3.  **рдЗрд╕реЗ рдРрд╕реЗ рдПрдбрд┐рдЯ (Edit) рдХрд░реЗрдВ:**
    * `<password>` рд╣рдЯрд╛рдХрд░ рдЕрдкрдирд╛ рдЕрд╕рд▓реА рдкрд╛рд╕рд╡рд░реНрдб рд▓рд┐рдЦреЗрдВред
    * `.net/` рдХреЗ рдмрд╛рдж рд╡рд╛рд▓реЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рд╣рдЯрд╛рдХрд░ `wa_bot_db?retryWrites=true&w=majority` рдЬреЛрдбрд╝ рджреЗрдВред

    **тЬЕ Final Link рдРрд╕рд╛ рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП:**
    ```text
    mongodb+srv://apna_user:apna_pass@cluster0.abc.mongodb.net/wa_bot_db?retryWrites=true&w=majority
    ```
4.  рдЗрд╕ рдлрд╛рдЗрдирд▓ рд▓рд┐рдВрдХ рдХреЛ GitHub рдореЗрдВ рд╕реЗрд╡ рдХрд░реЗрдВ:
    * ЁЯСЙ **GitHub Secret Name:** `MONGODB_URI`
    * ЁЯСЙ **Value:** (рдЕрдкрдирд╛ рдПрдбрд┐рдЯ рдХрд┐рдпрд╛ рд╣реБрдЖ рд▓рд┐рдВрдХ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)

---

## ЁЯЫая╕П Step 3: Supabase (Backup & Storage)
*рдзреНрдпрд╛рди рд╕реЗ рдлреЙрд▓реЛ рдХрд░реЗрдВ:*

### 1я╕ПтГг рдкрд╣рд▓реЗ Storage Bucket рдмрдирд╛рдПрдВ (рдЬрд░реВрд░реА рд╣реИ)
1.  [supabase.com](https://supabase.com) рдкрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реЗрдВред
2.  рд▓реЗрдлреНрдЯ рдореЗрдиреВ рдореЗрдВ **Storage** (рдлрд╝реЛрд▓реНрдбрд░ рдЖрдЗрдХреЙрди) рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
3.  **New Bucket** рдмрдЯрди рджрдмрд╛рдПрдВред
4.  Name рд░рдЦреЗрдВ: `bot-storage` (рд╕реНрдкреЗрд▓рд┐рдВрдЧ рдпрд╣реА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП)ред
5.  **Public bucket** рдХреЛ **OFF** рд░рдЦреЗрдВ рдФрд░ **Save** рдХрд░реЗрдВред

### 2я╕ПтГг рдЕрдм API URL рдФрд░ Keys рдирд┐рдХрд╛рд▓реЗрдВ
1.  рд▓реЗрдлреНрдЯ рд╕рд╛рдЗрдб рдореЗрдВ рд╕рдмрд╕реЗ рдиреАрдЪреЗ **Settings (тЪЩя╕П)** рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
2.  **API** рд╕реЗрдХреНрд╢рди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
3.  **URL:** рдКрдкрд░ **Project URL** рджрд┐рдЦреЗрдЧрд╛, рдЙрд╕реЗ рдХреЙрдкреА рдХрд░реЗрдВред
    * ЁЯСЙ **GitHub Secret Name:** `SUPABASE_URL`
    * ЁЯСЙ **Value:** (рдкреВрд░рд╛ рд▓рд┐рдВрдХ `https://` рдХреЗ рд╕рд╛рде рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)
4.  **Key:** рдиреАрдЪреЗ **"Legacy anon, service_role API keys"** рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ (рдЕрдЧрд░ рджрд┐рдЦреЗ рддреЛ), рдпрд╛ рд╕реАрдзреЗ рдиреАрдЪреЗ рджреЗрдЦреЗрдВред
5.  рд╡рд╣рд╛рдВ **service_role** (secret) рд╡рд╛рд▓реА Key рдХреЙрдкреА рдХрд░реЗрдВ (**anon** рд╡рд╛рд▓реА рдирд╣реАрдВ)ред
    * ЁЯСЙ **GitHub Secret Name:** `SUPABASE_SERVICE_ROLE`
    * ЁЯСЙ **Value:** (Key рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)

---

## ЁЯЫая╕П Step 4: Telegram (Notifications)
1.  Telegram рдкрд░ **@BotFather** рдХреЛ `/newbot` рднреЗрдЬреЗрдВ -> Token рдХреЙрдкреА рдХрд░реЗрдВред
    * ЁЯСЙ **GitHub Secret Name:** `TELEGRAM_BOT_TOKEN`
    * ЁЯСЙ **Value:** (Token рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)
2.  Telegram рдкрд░ **@userinfobot** рдХреЛ `/start` рднреЗрдЬреЗрдВ -> ID рдХреЙрдкреА рдХрд░реЗрдВред
    * ЁЯСЙ **GitHub Secret Name:** `TELEGRAM_CHAT_ID`
    * ЁЯСЙ **Value:** (ID рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)

---

## ЁЯЫая╕П Step 5: GitHub Token & Security
1.  GitHub рдореЗрдВ рдЕрдкрдиреА **Profile Photo** (Top Right) -> **Settings** -> **Developer Settings** -> **Personal access tokens** -> **Tokens (classic)**.
2.  **Generate new token (classic)** рджрдмрд╛рдПрдВред
3.  **Scope** рдореЗрдВ `workflow` рд╡рд╛рд▓реЗ рдмреЙрдХреНрд╕ рдХреЛ рдЯрд┐рдХ рдХрд░реЗрдВ (тЬЕ)ред
4.  рд╕рдмрд╕реЗ рдиреАрдЪреЗ **Generate token** рджрдмрд╛рдПрдВ рдФрд░ рдЯреЛрдХрди рдХреЙрдкреА рдХрд░реЗрдВред
    * ЁЯСЙ **GitHub Secret Name:** `GH_PAT`
    * ЁЯСЙ **Value:** (Token рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ)
5.  рдЕрдкрдиреЗ рдорди рд╕реЗ рдХреЛрдИ рднреА рдПрдХ рдкрд╛рд╕рд╡рд░реНрдб рд╕реЛрдЪ рд▓реЗрдВ (рдЬреИрд╕реЗ `MySecretPass123`)ред
    * ЁЯСЙ **GitHub Secret Name:** `N8N_ENCRYPTION_KEY`
    * ЁЯСЙ **Value:** `MySecretPass123`

---

## ЁЯзй API & Endpoints Guide (рдХрд┐рд╕реЗ рдХрд╣рд╛рдБ Use рдХрд░реЗрдВ?)

### 1я╕ПтГг WhatsApp QR Code (Browser рдХреЗ рд▓рд┐рдП)
рдЬрдм рдмреЙрдЯ рд╕реНрдЯрд╛рд░реНрдЯ рд╣реЛ рдЬрд╛рдП, рддреЛ WhatsApp рд╕реНрдХреИрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рд▓рд┐рдВрдХ Chrome рдореЗрдВ рдЦреЛрд▓реЗрдВ:
* **URL:** `https://YOUR-NGROK-DOMAIN/qr`


### 2я╕ПтГг Sending Message (n8n Workflow рдХреЗ рд▓рд┐рдП)
n8n рдХреЗ рдЕрдВрджрд░ **HTTP Request Node** рдореЗрдВ рдпрд╣ рдбрд╛рд▓реЗрдВ:
* **Method:** `POST`
* **URL:** `http://wa-bot:10000/send`
* **Body:**
  ```json
  { 
    "number": "919999999999", 
    "message": "Hello from n8n!" 
  }

рдЬрдм  WhatsApp reset krne ke liye browser me khole:
* **URL:** `https://YOUR-NGROK-DOMAIN/reset`

### g4f AI (n8n Workflow рдХреЗ рд▓рд┐рдП)
n8n рдХреЗ рдЕрдВрджрд░ **HTTP Request Node** рдореЗрдВ рдпрд╣ рдбрд╛рд▓реЗрдВ:
* **Method:** `POST`
* **URL:** `http://ai-server:5000/chat`
* **Body:**
  ```json
  {  
    "message": "your--text" 
  }
